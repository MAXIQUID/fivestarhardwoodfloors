<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Five Star Hardwood Catalog</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: #222;
  }
  #catalog {
    width: 100%;
    height: 100%;
    background-repeat: repeat;
    background-position: top left;
    background-size: auto;
  }
</style>
</head>
<body>

<div id="catalog"></div>

<script>
let images = [];
let currentIndex = 0;

// Preload images lazily
function preloadImage(url) {
  return new Promise(resolve => {
    const img = new Image();
    img.src = url;
    img.onload = () => resolve(url);
    img.onerror = () => resolve(null); // ignore errors
  });
}

async function preloadAll(data) {
  for (const item of data) {
    await preloadImage(item.image);
  }
}

function showImage(index) {
  const catalog = document.getElementById('catalog');
  const img = images[index];
  if (!img) return;
  catalog.style.backgroundImage = `url('${img.image}')`;
}

// Fetch catalog and preload images
fetch('hardwood_catalog.json')
  .then(res => res.json())
  .then(async data => {
    images = data;
    showImage(currentIndex);
    // Lazy preload remaining images in background
    preloadAll(data.slice(1));
  })
  .catch(err => console.error('Error loading catalog:', err));

// Tap/click to next image
document.body.addEventListener('click', () => {
  if (images.length === 0) return;
  currentIndex = (currentIndex + 1) % images.length;
  showImage(currentIndex);
});
</script>

</body>
</html>
