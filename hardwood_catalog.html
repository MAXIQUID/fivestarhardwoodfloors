<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Five Star Hardwood Catalog</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #222;
  }
  #catalog {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(1px, auto));
    grid-auto-rows: auto;
  }
  .tile {
    width: auto;
    height: auto;
    background-size: auto;
    background-repeat: repeat;
    background-position: top left;
    flex-shrink: 0;
  }
</style>
</head>
<body>

<div id="catalog"></div>

<script>
let images = [];
let currentIndex = 0;

function showImage(index) {
  const catalog = document.getElementById('catalog');
  catalog.innerHTML = ''; // clear previous
  const img = images[index];
  
  // create tile div
  const tile = document.createElement('div');
  tile.className = 'tile';
  tile.style.backgroundImage = `url('${img.image}')`;
  tile.style.width = `${img.width || img.naturalWidth}px`;
  tile.style.height = `${img.height || img.naturalHeight}px`;

  catalog.appendChild(tile);
}

// preload image to get natural size
function preloadImage(url) {
  return new Promise(resolve => {
    const img = new Image();
    img.src = url;
    img.onload = () => resolve({url, width: img.width, height: img.height});
  });
}

fetch('hardwood_catalog.json')
  .then(res => res.json())
  .then(async data => {
    // preload all images
    images = await Promise.all(data.map(async item => {
      const loaded = await preloadImage(item.image);
      return {...item, naturalWidth: loaded.width, naturalHeight: loaded.height};
    }));
    showImage(currentIndex);
  });

// tap/click to next image
document.body.addEventListener('click', () => {
  if (images.length === 0) return;
  currentIndex = (currentIndex + 1) % images.length;
  showImage(currentIndex);
});
</script>

</body>
</html>
